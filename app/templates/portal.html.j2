{% extends "layout.html.j2" %}
{% block title %}Portal{% endblock %}
{% block header %}Welcome{% if current_user.account_name is defined %}, {{ current_user.account_name | title | safe }}{% endif %}!{% endblock %}
{%- block content %}
                {%- if current_user.seasonal_points is defined and current_user.seasonal_points > 0 %}
                <h3 id="seasonal-points">
                    Seasonal Point{% if current_user.seasonal_points != 1 %}s{% endif %}: {{ current_user.seasonal_points }}
                </h3>
                {%- endif %}
                {%- if current_user.players is defined and current_user.players is iterable and current_user.players|length > 0 %}
                <h3>
                    You have {{ current_user.players | length }} player{% if current_user.players|length != 1 %}s{% endif %}:
                </h3>
                <br>
                <table>
                    <tr>
                        <th>Name</th>
                        <th>Class</th>
                        <th>Level</th>
                        <th>Remort(s)</th>
                    </tr>
                    {%- for player in current_user.players %}
                    <tr>
                        {%- set player_title = player.title | replace('%s','<strong>' + player.name + '</strong>') %}
                        <td><span title="Born {{ player.birth | unix2human_time }}">{{ player_title | safe }}</span></td>
                        <td>{{ player.player_class.class_name | title | safe }}</td>
                        <td class="players-right">{{ player.level }}</td>
                        <td class="players-right">{{ player.remorts }}</td>
                    </tr>
                    {%- endfor %}
                </table>
                {%- else %}
                <h3>
                    You have not created any players yet!
                </h3>
                {%- endif %}
                <br>
                {%- if season.season_id is defined and season.effective_date is defined and season.expiration_date is defined %}
                <h4 id="season-details">
                    <strong>Season {{ season.season_id }}</strong> / <strong>{{ season.effective_date | unix2human_time }}</strong> ~ <strong>{{ season.expiration_date | unix2human_time }}</strong>
                </h4>
                {%- endif %}
{%- endblock %}
{%- if current_user.created_at is defined and current_user.created_at != '' %}
{% block footer %}
            <div id="created">You created your account on {{ current_user.created_at.strftime('%c') }}.</div>
{%- endblock %}
{%- endif %}
