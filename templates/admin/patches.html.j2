{%- set page = 'admin' -%}
{% extends "layout.html.j2" %}
{% block meta_title %}Patches / Administration Portal{% endblock meta_title %}
{% block meta_description %}Administration portal to upload patch notes{% endblock meta_description %}
{% block meta_url %}{{ url_for('admin.patches', _external=True) }}{% endblock meta_url %}
{% block title %}Patches / Administration Portal{% endblock title %}
{% block header %}Patches{% endblock header %}
{%- macro render_field(field) %}
                    <tr>
                        <td class="admin-{{ field.name | safe }}">
                            {{ field.label | safe }}
                        </td>
                        <td class="admin-{{ field.name | safe }}">
                            {{ field(**kwargs) | safe }}
    {%- if field.errors %}
                            <ul class="flash-error">
        {%- for error in field.errors %}
                                <li>
                                    {{ error }}
                                </li>
        {%- endfor %}
                            </ul>
    {%- endif %}
                        </td>
                    </tr>
{%- endmacro %}
{%- block content %}
    {%- if patch_add_form is defined %}
                <h3 title="Add">Add</h3>
                <form autocomplete="off" method="post" enctype="multipart/form-data" action="{{ url_for('admin.patches') }}" id="patches-add-form">
                    <table>
                        {{ render_field(patch_add_form.name, autocomplete='off') }}
                        {{ render_field(patch_add_form.file, autocomplete='off') }}
                        {{ patch_add_form.csrf_token }}
                        {{ render_field(patch_add_form.submit) }}
                    </table>
                </form>
    {%- endif %}
    {%- if all_patches and all_patches is iterable and all_patches | length > 0 %}
                <hr>
                <div id="all-patches"></div>
                <script>
                    showPatches(document.getElementById('all-patches'));
                </script>
    {%- endif %}
{%- endblock content %}
