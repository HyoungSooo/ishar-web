{%- set page = 'admin' -%}
{% extends "layout.html.j2" %}
{%- block meta_title %}
Edit News: {{ edit_news.subject | title | safe }} / Administration Portal
{%- endblock meta_title %}
{%- block meta_description %}
Administration portal to edit a news post
{%- endblock meta_description %}
{%- block meta_url %}
{{ url_for('admin.edit_news', edit_news_id=edit_news.news_id, _external=True) }}
{%- endblock meta_url %}
{%- block title %}
Edit News: {{ edit_news.subject | title | safe }} / Administration Portal
{%- endblock title %}
{%- block header %}
Edit News: {{ edit_news.subject | title | safe }} / Administration Portal
</a>
{%- endblock header %}
{%- macro render_field(field) %}
                    <tr>
                        <td class="admin-{{ field.name | safe }}">
                            {{ field.label | safe }}
                        </td>
                        <td class="admin-{{ field.name | safe }}">
                            {{ field(**kwargs) | safe }}
    {%- if field.errors %}
                            <ul class="flash-error">
        {%- for error in field.errors %}
                                <li>
                                    {{ error }}
                                </li>
        {%- endfor %}
                            </ul>
    {%- endif %}
                        </td>
                    </tr>
{%- endmacro %}
{%- block content %}
    {%- if edit_news is defined and edit_news_form is defined %}
                <form autocomplete="off" method="post" action="{{ url_for('admin.edit_news', edit_news_id=edit_news.news_id) }}" id="news-edit-form">
                    <table>
                        <tr>
                            <td>
                                News ID
                            </td>
                            <td>
                                {{ edit_news.news_id }}
                            </td>
                            <td>
                        </tr>
                        <tr>
                            <td>
                                Created
                            </td>
                            <td>
                                {{ edit_news.created_at.strftime('%A, %B %d, %Y') }}
                            </td>
                        </tr>
                        {{ render_field(edit_news_form.subject, value=edit_news.subject, autocomplete='off') }}
                        {{ render_field(edit_news_form.body, autocomplete='off') }}
                        {{ edit_news_form.csrf_token }}
                        {{ render_field(edit_news_form.submit) }}
                    </table>
                    <script>document.getElementById('body').innerHTML = "{{ edit_news.body }}";</script>
                </form>
    {%- endif %}
{%- endblock %}
