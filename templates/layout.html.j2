{%- macro display_essence(essence) -%}
    {%- if essence > 0 -%}
        <strong>{{ essence }} essence</strong>
    {%- else -%}
        <span class="flash-error">{{ essence }} essence</span>
    {%- endif -%}
{%- endmacro -%}
<!DOCTYPE html>
<html lang="en">
    <head>
    {%- block head %}
        <meta charset="UTF-8">
        <meta name="author" content="Ishar MUD">
        <meta name="description" content="Ishar MUD">
        <meta name="keywords" content="Ishar MUD, Ishar, IsharMUD, MUD, Multi User Dungeon, Multi-User Dungeon, Game">
        {%- if sentry_span is defined and sentry_span != None %}
        <meta name="sentry-trace" content="{{ sentry_span.toSentryTrace() }}">
        <meta name="baggage" content="{{ serializeBaggage(sentry_span.getBaggage()) }}">
        {%- endif %}
        <meta name="viewport" content="width=device-width">
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="Ishar MUD">
        <meta property="og:title" content="{% block meta_title %}Welcome{% endblock meta_title %} - Ishar MUD">
        <meta property="og:description" content="Ishar MUD: {% block meta_description %}a free online text-adventure RPG{% endblock %}">
        <meta property="og:url" content="{% block meta_url %}{{ url_for('welcome', _external=True) }}{% endblock meta_url %}">
        <meta property="og:image" content="{% block meta_image %}{{ url_for('static', filename='images/header_test_alpha.png', _external=True) }}{% endblock meta_image %}">
        <title>{% block title %}Welcome{% endblock %} - Ishar MUD</title>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
        <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
        {%- if sentry_js is defined and sentry_js != None and sentry_js != '' %}
        <script src="{{ sentry_js }}" crossorigin="anonymous"></script>
        {%- endif %}
    {%- endblock head %}
    {%- block scripts %}
    {%- endblock scripts %}
    </head>
    <body>
        <header>
            <a href="{{ url_for('welcome') }}" title="Ishar MUD">
                <h1 hidden="yes" title="Ishar MUD">
                    Ishar MUD
                </h1>
                <img src="{{ url_for('static', filename='images/header_test_alpha.png' )}}">
            </a>
        </header>
        <nav>
{%- block navigation %}
{% include('navigation.html.j2') %}
{%- endblock navigation %}
        </nav>
{%- if current_user is defined and current_user.is_authenticated and current_user.account_name is defined %}
        <nav>
            <ul>
    {%- if current_user.is_god %}
                <li title="Administration Portal">
                    <a href="{{ url_for('admin_portal') }}" {%- if page == 'admin' %} id="active-nav"{% endif%} title="Administration Portal">Administration</a>
                </li>
    {%- endif %}
                <li>
                    <a href="{{ url_for('challenges') }}" {%- if page == 'challenges' %} id="active-nav"{% endif%} title="Challenges">Challenges</a>
                </li>
                <li>
                    <a href="{{ url_for('leaderboard') }}" {%- if page == 'leaderboard' %} id="active-nav"{% endif%} title="Leader Board">Leader Board</a>
                </li>
    {%- if current_user.seasonal_points > 0 %}
        {%- set essence = ' (' + current_user.seasonal_points | string + ')' %}
    {%- else %}
        {%- set essence = '' %}
    {%- endif %}
                <li>
                    <a href="{{ url_for('shop') }}" {%- if page == 'shop' %} id="active-nav"{% endif%} title="Shop {{- essence }}">Shop {{- essence }}</a>
                </li>
                <li>
                    <a href="{{ url_for('logout') }}" title="Log Out">Log Out</a>
                </li>
            </ul>
        </nav>
{%- endif %}
        <div id="content">
            <h2>
                {% block header %}{% endblock header %}
            </h2>
{%- with messages = get_flashed_messages(with_categories=True) %}
    {%- if messages %}
            <div id="flashes">
                <ul>
        {%- for category, message in messages %}
                    <li class="flash-{{ category }}">
                        {{ message }}
                    </li>
        {%- endfor %}
                </ul>
            </div>
    {%- endif %}
{%- endwith %}
{%- block content %}
{%- endblock content %}
        </div>
        <footer>
{%- block footer %}
            <ul>
    {%- if current_user is defined and current_user.is_authenticated %}
        {%- if current_user.created_at is defined and current_user.created_at != '' %}
                <li title="Account Created: {{ current_user.created_at.strftime('%A, %B %d, %Y @ %H:%M:%S %Z') }}">
                    <a href="{{ url_for('manage_account') }}">Account Created</a>
                    {{ current_user.created_at.strftime('%A, %B %d, %Y') }}
                </li>
        {%- endif %}
    {%- endif %}
    {%- if current_season is defined and current_season.expires is defined and current_season.expiration_date is defined %}
              <li title="Season {{ current_season.season_id }} ends in {{ current_season.expires }} on {{ current_season.expiration_date.strftime('%A, %B %d, %Y @ %H:%M:%S %Z') }}">
                    <a href="{{ url_for('season') }}">Season {{ current_season.season_id }}</a>
                    ends in <span id="season-countdown">{{ current_season.expires }}</span> on {{ current_season.expiration_date.strftime('%A, %B %d, %Y')}}
                </li>
    {%- endif %}
            </ul>
{%- endblock footer %}
        </footer>
    </body>
</html>
