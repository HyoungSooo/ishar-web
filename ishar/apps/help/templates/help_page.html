{% extends "layout.html" %}
{% load get_dict_item from ishar%}
{% block meta_title %}Help: {{ help_topic.name }}{% endblock meta_title %}
{% block meta_description %}Help pages for Ishar MUD{% endblock meta_description %}
{% block meta_url %}{% if help_topic %}{% url "help_page" help_topic=help_topic.name %} %}{% else %}{% url "help" %}{% endif %}{% endblock meta_url %}
{% block title %}Help{% if help_topic and help_topic.name %}: {{ help_topic.name }}{% endif %}{% endblock title %}
{% block header %}
<nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '>';">
    <ol class="breadcrumb" style="--bs-breadcrumb-divider-color: var(--ishar-color);">
        <li class="breadcrumb-item{% if not help_topic %} active" aria-current="page{% endif %}" title="Help">
            <a href="{% url "help" %}">Help</a>
        </li>
    {% if help_topic %}
        <li class="breadcrumb-item active" aria-current="page" title="{{ help_topic.name }}">
             <a href="{% url "help_page" help_topic=help_topic.name %}">{{ help_topic.name }}</a>
        </li>
    {% endif %}
    </ol>
</nav>
{% endblock header %}
{% block content %}

    {% if help_topic %}
    <div class="card bg-dark">
        <div class="card-header">
            <ul class="help-topic-list">
        {% for help_property in help_properties %}
            {% with help_property_value=help_topic|get_dict_item:help_property %}
                {% if help_property_value %}
                <li class="card-text">
                    <strong>{{ help_property | title }}</strong>:
                    <code>{% autoescape off %}{{ help_property_value }}{% endautoescape %}</code>
                </li>
                {% endif %}
            {% endwith %}
        {% endfor %}
            </ul>
        </div>
        {% if help_topic.body_html %}
        <div class="card-body">
            <pre class="card-text">{% autoescape off %}{{ help_topic.body_html }}{% endautoescape %}</pre>
        </div>
        {% endif %}
    </div>
    {% endif %}

    {% if request.user.is_anonymous and not help_topic %}
    <div class="card bg-dark">
        <div class="card-body">
            <p class="card-text">
                If you are new here, you may want to download one of many
                <a href="{% url "clients" %}" title="MUD clients">MUD clients</a>,
                see our <a href="{% url "start" %}" title="getting started guide">getting started guide</a>, and
                <a href="{% url "discord" %}" target="_blank" title="IsharMUD Discord Invitation">join us on Discord</a>!
            </p>
        </div>
    </div>
    {% endif %}

    {% if help_search_form %}
    <div class="card bg-dark">
        <div class="card-body">
            <form class="card-text" method="post">
                {% csrf_token %}
                {{ help_search_form.as_p }}
                <p>
                    <button class="btn btn-outline-primary" type="submit">Search</button>
                    <button class="btn btn-outline-secondary" type="reset">Clear</button>
                </p>
            </form>
    {% if not help_topic %}
            <p class="card-footer blockquote-footer">
                such as &quot;<a href="{% url "help_page" help_topic="spell" %}">spell</a>&quot; or
                &quot;<a href="{% url "help_page" help_topic="MUD Basics" %}">MUD Basics</a>&quot;
            </p>
    {% endif %}
        </div>
    </div>
    {% endif %}

    <div class="card bg-dark">
        <div class="card-body">
    {% if help_topics %}
            <ul class="card-text help-topic-list">
        {% for list_topic in help_topics %}
                <li title="Topic: {{ list_topic }}"><a href="{% url "help_page" help_topic=list_topic %}">{{ list_topic }}</a></li>
        {% endfor %}
            </ul>
    {% else %}
            <p class="card-text">
                <strong>Sorry, but no help topics were found.</strong>
            </p>
    {% endif %}
        </div>
    </div>
{% endblock content %}
