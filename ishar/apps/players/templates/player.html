{% extends "layout.html" %}
{% load humanize %}
{% block meta_title %}{% if player %}Player: {{ player.name }}{% if player.player_type == 'Dead' %} ☠️{% endif %}{% else %}Player Not Found{% endif %}{% endblock meta_title %}
{% block meta_description %}{% if player %}Player: {{ player.name }}{% if player.player_type == 'Dead' %} ☠️{% endif %}{% else %}Player Not Found{% endif %}{% endblock meta_description %}
{% block meta_url %}{% url "players" %}{% endblock meta_url %}
{% block title %}{% if player %}Player: {{ player.name }}{% if player.player_type == 'Dead' %} ☠️{% endif %}{% else %}Player Not Found{% endif %}{% endblock title %}
{% block header %}{% if player %}Player: <a class="{{ player.player_css }}" href="{{ player.get_absolute_url }}" title="{{ player.name }}">{{ player.name }}</a>{% else %}Player Not Found{% endif %}{% endblock header %}
{% block content %}
    {% if player %}
    <h3 id="player" title="{{ player.player_title }}">
        {{ player.player_title }}
    </h3>
        {% if player.description %}
    <p class="lead">
        {{ player.description }}
    </p>
        {% endif %}
        {% if not player.is_immortal %}
    <div class="accordion m-3 rounded" id="details">
        <div class="bg-dark accordion-item">
            <h3 class="accordion-header" title="Details">
                <button class="fw-bold accordion-button bg-black" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-details" aria-expanded="true" aria-controls="collapse-details">
                    Details
                </button>
            </h3>
            <div id="collapse-details" class="accordion-collapse collapse show">
                <div class="accordion-body text-white">
                    <ul class="list-group list-group-horizontal-md">
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Name: {{ player.name | title }} / Class: {{ player.common.player_class.get_class_name }} / Race: {{ player.common.race.display_name }}">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.name | title }} {{ player.get_player_phrase }} a {{ player.common.player_class.class_display }} of {{ player.common.race.folk_name | lower }} origin.
                        </li>
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Level: {{ player.common.level }} {% if player.remorts > 0 %} / Remorts: {{ player.remorts }}{% endif %}">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} {{ player.get_player_phrase }} level {{ player.common.level }}{% if player.remorts > 0 %} and {{ player.get_player_phrase_owns }} remorted {{ player.remorts }} time{{ player.remorts|pluralize }}{% endif %}.
                        </li>
                    {% if player.total_renown > 0 %}
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Total Renown: {{ player.total_renown }}">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} {{ player.get_player_phrase_owns }} accumulated {{ player.total_renown }} renown.
                        </li>
                    {% endif %}
                    {% if player.quests_completed > 0 %}
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Quests Completed: {{ player.quests_completed }}">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} {{ player.get_player_phrase_owns }} completed {{ player.quests_completed }} quest{{ player.quests_completed | pluralize }}.
                        </li>
                    {% endif %}
                    {% if player.challenges_completed > 0 %}
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Challenges Completed: {{ player.challenges_completed }}">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} {{ player.get_player_phrase_owns }} completed {{ player.challenges_completed }} challenge{{ player.challenges_completed | pluralize }}.
                        </li>
                    {% endif %}
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Alignment: {{ player.get_player_alignment }} ({{ player.common.alignment }})">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender_own | title }} alignment {{ player.get_player_phrase }} {{ player.get_player_alignment | lower }}.
                        </li>
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="{% if player.player_type == 'Classic' %}Deaths: {{ player.deaths }}{% elif player.player_type == 'Dead' %}{{ player.name | title }} is DEAD!{% else %}{{ player.name | title }} is a {{ player.player_type }} player!{% endif %}">
                            <span class="bi bi-dot text-ishar"></span>
                    {% if player.player_type == 'Dead' %}
                        {{ player.name | title }} is <span class="message-error">DEAD</span>!
                            <ul>
                                <li title="{{ player.name | title }} died too often. {{ player.get_player_gender | title }} can not be resurrected!">
                                    {{ player.name | title }} died too often. {{ player.get_player_gender | title }} can not be resurrected!
                                </li>
                            </ul>
                    {% elif player.player_type == "Survival" %}
                            {{ player.name | title }} {{ player.get_player_phrase }} a <span class="{{ player.player_css }}">{{ player.player_type }}</span> player!
                    {% else %}
                        {% if player.deaths > 0 %}
                            {{ player.get_player_gender | title }} {{ player.get_player_phrase_owns }} died {{ player.deaths }} time{{ player.deaths|pluralize }}.
                        {% else %}
                            {{ player.get_player_gender | title }} {{ player.get_player_phrase_owns }} never died!
                        {% endif %}
                    {% endif %}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
            {% if player.upgrades %}
    <div class="accordion m-3 rounded" id="remort-upgrades">
        <div class="accordion-item bg-dark" id="upgrades">
            <h4 class="accordion-header" title="Remort Upgrades">
                <button class="fw-bold accordion-button bg-black" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-upgrades" aria-expanded="true" aria-controls="collapse-upgrades">
                    Remort Upgrades
                </button>
            </h4>
            <div id="collapse-upgrades" class="accordion-collapse collapse show">
                <div class="accordion-body text-white">
                    <ul class="list-group list-group-horizontal-md">
                {% for upgraded in player.upgrades.all %}
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="{{ upgraded.upgrade.display_name }}{% if upgraded.value > 1 %} (x{{ upgraded.value }}){% endif %}">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ upgraded.upgrade.display_name }}{% if upgraded.value > 1 %}<span class="text-ishar"> (x{{ upgraded.value }})</span>{% endif %}
                        </li>
                {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
            {% endif %}
            {% if player.player_stats %}
    <div class="accordion m-3 rounded">
        <div class="accordion-item bg-dark" id="stats">
            <h4 class="accordion-header" title="Statistics">
                <button class="fw-bold accordion-button bg-black" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-stats" aria-expanded="true" aria-controls="collapse-stats">
                    Statistics
                </button>
            </h4>
            <div id="collapse-stats" class="accordion-collapse collapse show">
                <div class="accordion-body text-white">
                    <ol class="list-group list-group-horizontal-md">
                {% for stat_name, stat_value in player.player_stats.items %}
                        <li class="bg-dark border-0 list-group-item" title="{{ stat_name }}: {{ stat_value }}">
                            <span class="list-group-item-text text-white{% if forloop.first %} fw-bold{% endif %}">
                                <span class="text-ishar">{{ stat_name }}</span>:
                                {{ stat_value }}
                            </span>
                        </li>
                {% endfor %}
                    </ol>
                </div>
            </div>
        </div>
    </div>
            {% endif %}

    <div class="accordion m-3 rounded">
        <div class="accordion-item bg-dark" id="time">
            <h4 class="accordion-header" title="Time">
                <button class="fw-bold accordion-button bg-black" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-time" aria-expanded="true" aria-controls="collapse-time">
                    Time
                </button>
            </h4>
            <div id="collapse-time" class="accordion-collapse collapse show">
                <div class="accordion-body">
                    <ul class="list-group list-group-horizontal-md">
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Logged On: {{ player.logon | naturaltime }}, ({{ player.logon }})">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} last logged on {{ player.logon | naturaltime }},
                            on {{ player.logon | date }}.
                        </li>
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Logged Out: {{ player.logout | naturaltime }}, ({{ player.logout }})">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} last logged out {{ player.logout | naturaltime }},
                            on {{ player.logon | date }}.
                        </li>
                    </ul>
                </div>
                <div class="accordion-body">
                    <ul class="list-group list-group-horizontal-md">
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Birth: {{ player.birth | naturaltime }}, ({{ player.birth }})">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} was born {{ player.birth | naturaltime }},
                            on {{ player.birth | date }}.
                        </li>
                        <li class="bg-dark border-0 list-group-item list-group-item-text text-white" title="Played For: {{ player.online_time }} ({{ player.online }} seconds)">
                            <span class="bi bi-dot text-ishar"></span>
                            {{ player.get_player_gender | title }} {{ player.get_player_phrase_owns }} played
                            for {{ player.online_time }}.
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
        {% else %}
    <p class="lead">
        {{ player.name | title }} {{ player.get_player_phrase }} a
        <span class="{{ player.player_css }}">{{ player.player_type }}</span> character!
    </p>
        {% endif %}
    {% endif %}
{% endblock content %}
