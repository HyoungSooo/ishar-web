{% extends "layout.html" %}
{% block meta_title %}Leaders{% if game_type %} / {{ game_type }}{% endif %}{% endblock meta_title %}
{% block meta_description %}Leader board of top{% if game_type %} {{ game_type|lower }}{% endif %} players of the game and their achievements{% endblock meta_description %}
{% block meta_url %}{% if game_type %}{% url game_type|lower %}{% else %}{% url "leaders" %}{% endif %}{% endblock meta_url %}
{% block title %}Leaders{% if game_type %} / {{ game_type }}{% endif %}{% endblock title %}
{% block header %}
<nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: 'â€¢';">
    <ol class="breadcrumb" style="--bs-breadcrumb-divider-color: var(--ishar-color);">
        <li class="breadcrumb-item{% if not game_type %} active" aria-current="page{% endif %}" title="Leaders">
            <span class="text-ishar bi bi-trophy"></span>
            <a href="{% url "leaders" %}">
                Leaders
            </a>
        </li>
    {% if game_type %}
        <li class="breadcrumb-item active" aria-current="page" title="{{ help_topic.name }}">
            <span class="text-ishar">{{ game_type }}</span>
        </li>
    {% endif %}
    </ol>
</nav>
{% endblock header %}
{% block scripts %}
        <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
        <script>
            function showLeaders(where) {
                new gridjs.Grid({
                    columns: [
                        {
                            id: 'name',
                            name: 'Player',
                            formatter:  (cell) => gridjs.html(`<a href="/player/${cell}#player">${cell}</a>`)
                        },
                        {
                            id: 'remorts',
                            name: 'Remorts'
                        },
                        {
                            id: 'renown',
                            name: 'Renown'
                        },
                        {
                            id: 'quests',
                            name: 'Quests'
                        },
                        {
                            id: 'challenges',
                            name: 'Challenges'
                        },
                        {
                            id: 'deaths',
                            name: 'Deaths'
                        }
                    ],
                    data: [
                      {% for leader in leader_players %}
                        {
                            name: "{{ leader.name }}",
                            remorts: {{ leader.remorts }},
                            renown: {{ leader.total_renown }},
                            quests: {{ leader.quests_completed }},
                            challenges: {{ leader.challenges_completed }},
                            deaths: {{ leader.deaths }}
                        }{% if not forloop.last %},{% endif %}
                      {% endfor %}
                    ],
                    className: {
                        table: "table table-bordered table-dark",
                    },
                    search:     true,
                    sort:       true,
                    pagination: true,
                    width:      '50%'
                }).render(where);
            };
        </script>
{% endblock scripts %}
{% block content %}
    <ul class="m-1 p-1 list-group list-group-horizontal">
        <li class="list-group-item bg-dark" title="Classic">
    {% if game_type != "Classic" %}
            <a class="list-group-item-text" href="{% url "classic" %}">Classic</a>
    {% else %}
            <span class="text-ishar">Classic</span>
    {% endif %}
        </li>
        <li class="list-group-item bg-dark" title="Survival">
    {% if game_type != "Survival" %}
            <a class="list-group-item-text" href="{% url "survival" %}">Survival</a>
    {% else %}
            <span class="text-ishar">Survival</span>
    {% endif %}
        </li>
    </ul>
    <div class="m-1 p-1" id="leaders"></div>
    <script>showLeaders( document.getElementById('leaders'));</script>
{% endblock content %}
